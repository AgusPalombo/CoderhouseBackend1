<h1>Productos en Tiempo Real</h1>
<div id="products-list"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    socket.on('updateProducts', (products) => {
        const productList = document.getElementById('products-list');
        productList.innerHTML = ''; // Limpiar lista actual

        products.forEach(product => {
            const productElement = document.createElement('div');
            productElement.innerHTML = `
                <h2>${product.title}</h2>
                <p>Precio: $${product.price}</p>
                <p>Categoría: ${product.category}</p>
                <p>Stock: ${product.stock}</p>
                <button onclick="addToCart('${product.id}')">Agregar al carrito</button>
            `;
            productList.appendChild(productElement);
        });
    });

    function addToCart(productId) {
        fetch(`/api/carts/:cid/products/${productId}`, { method: 'POST' })
            .then(response => response.json())
            .then(data => console.log('Producto añadido:', data))
            .catch(error => console.error('Error al añadir el producto:', error));
    }
</script>
